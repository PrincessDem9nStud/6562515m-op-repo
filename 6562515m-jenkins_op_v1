pipeline{
	agent any
	 stages{
			stage("Op-6562515m-S1"){
			steps{
			//remove qa backup image then create a new image called qa-bkup-image
			//update the qa server by doing a bolt script run 
			//to update QA web server with the new html format (req#3)
				echo "Op-6562515m-S1: QA web server is backup and updated"
				bat "mvn S1"
				}
			}
			stage("Op-6562515m-S2"){
			steps{
			//execute the curl test (req#4)
				echo "Op-6562515m-S2: Checking on whether QA server is running after update"
				bat "mvn S2"
				}
			}
			stage("Op-6562515m-S3"){
			steps{
            //Set options, choose between proceed to roll out PROD or roll back to QA
			//if rollback, must execute rollback by using the qa-bkup-image
				echo "Op-6562515m-S3: Proceed to roll out to Prod Server"
				echo "Op-6562515m-S3: QA server fails after update and is rolled back"
				bat "mvn S3"
			}
			}
			stage("Op-6562515m-S4") {
			steps {
			//remove any prod backup image and create a new image called prod-bkup-image
			//update prod server by executing bolt run just like stage 1
				echo "Op-6562515m-S4: Prod web server is backup and updated"
				bat "mvn S4"
				}
			}
			stage("Op-6562515m-S5"){
			steps{
			//execute the curl test (req#4)
				echo "Op-6562515m-S5: Checking on whether PROD server is running after update"
				bat "mvn S5"
				}
			}
			stage("Op-6562515m-S6"){
			steps{
            //Set options, choose between proceed to release PROD to production or roll back to PROD
			//if rollback, must execute rollback by using the prod-bkup-image
				echo "Op-6562515m-S6: Proceed to release PROD web server to production"
				echo "Op-6562515m-S6: Prod web server is rolled back"
				bat "mvn S6"
			}
			}
			stage("Op-6562515m-S7"){
			steps{
			//this stage can only be executed if no rollback is performed
				echo "Op-6562515m-S7: PROD web server is monitored and ready to serve"
				bat "mvn S7"
			}
			}
		}
	}
